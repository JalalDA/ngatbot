Saya ingin menambahkan **fitur builder bot Telegram otomatis** ke dalam website saya yang sudah jadi. Pengguna cukup memasukkan token bot dari BotFather, lalu sistem secara otomatis membuatkan bot dengan menu interaktif dan sistem pembelian akun digital seperti "Akun Canva".

### 🔧 Spesifikasi Website Saya Saat Ini:
- Bahasa: TypeScript
- Frontend:
  - React.js (dengan TypeScript)
  - Tailwind CSS
  - Vite
  - React Hook Form
  - TanStack Query
- Backend:
  - Node.js + Express.js (dengan TypeScript)
  - Passport.js untuk autentikasi
  - Drizzle ORM
  - Telegram Bot API
  - Midtrans untuk pembayaran QRIS
  - OpenAI API (opsional)
- Database:
  - PostgreSQL
  - Drizzle ORM (file skema: `shared/schema.ts`)

---

## 🎯 Tujuan Fitur

Saya ingin pengguna cukup **input token bot Telegram**, dan sistem akan:

1. **Validasi token bot** dengan `getMe`
2. **Set webhook Telegram** ke endpoint backend saya
   (misalnya: `https://mydomain.com/api/webhook/telegram/:botId`)
3. Simpan data bot ke database
4. Bot Telegram akan berjalan otomatis dengan alur berikut:

### 🔄 Alur Bot Telegram:

#### 1. `/start`
- Kirim pesan sambutan
- Tampilkan menu:  
  `🎨 Akun Canva` (inline keyboard)

#### 2. Klik "Akun Canva"
- Bot kirim daftar harga:  
  `Canva Pro 1 Bulan - Rp 10.000`  
  `Canva Pro 1 Tahun - Rp 50.000`

#### 3. Klik salah satu harga
- Bot kirim QRIS Midtrans
- Bot tampilkan tombol “Cek Status Pembayaran”

#### 4. Setelah user bayar & klik “Cek Status Pembayaran”
- Sistem cek status pembayaran ke Midtrans
- Jika `settlement`, bot otomatis kirim akun dari database  
  Format:  
  `✅ Berikut akun Canva Anda:\nEmail: xxx\nPassword: yyy`

#### 5. Tandai akun sebagai "terpakai" di database

---

## 📦 Struktur Database (PostgreSQL via Drizzle ORM)

Tambahkan tabel berikut:
1. `bots` – info bot milik user (id, user_id, bot_token, username, aktif)
2. `products` – contoh: Akun Canva (nama, deskripsi, harga)
3. `orders` – transaksi (id, user_id, bot_id, produk_id, status, midtrans_id)
4. `akun_stok` – stok akun digital (email, password, status: tersedia/terpakai)
5. `payments` – data invoice Midtrans
6. `users` – data pengguna (sudah ada)

---

## 📡 Endpoint yang Perlu Dibuat

### API Umum
- `POST /api/bot/create`  
  → input: token bot  
  → proses: `getMe` + `setWebhook` + simpan database

- `POST /api/webhook/telegram/:botId`  
  → handler pesan masuk Telegram  
  → deteksi `/start`, callback query, cek status, dll

- `POST /api/webhook/midtrans`  
  → handler status pembayaran dari Midtrans

---

## ✅ Permintaan Khusus:

- Buat semuanya otomatis, pengguna hanya perlu memasukkan token bot
- Gunakan webhook, **bukan long polling**
- Semua kode menggunakan TypeScript
- Gunakan Drizzle ORM untuk semua interaksi database
- Integrasikan Midtrans untuk QRIS
- Gunakan error handling dan validasi yang aman
- Tambahkan dummy data `akun Canva` agar bisa langsung dites
- Buat UI input token di React + Tailwind + React Hook Form
- Gunakan TanStack Query untuk fetch API
- Simpan bot_token dengan cara yang aman (jangan plaintext)

---

## 🧠 Catatan
Jika bisa, tambahkan sistem logika stok akun:
- Akun ditandai "terpakai" setelah dikirim
- Jika stok habis, tampilkan pesan: “Maaf, stok akun habis.”

---

## 🎁 Output yang Saya Inginkan:
- Kode backend dan frontend lengkap
- Konfigurasi database dan migrasi
- Struktur folder dan file
- Bisa langsung saya masukkan ke dalam proyek yang sudah ada

